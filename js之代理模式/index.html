<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title></title>
  </head>

  <body></body>
  <script>
    // function Flowers(){
    //   console.log('送花')
    // }
    // var xiaoming={
    //   sendFlowers:function(target){
    //     var flower = new Flowers();
    //     target.receiveFlower(flower)
    //   }
    // }

    // var A={
    //   receiveFlower:function(flower){
    //     console.log('收到花'+flower)
    //   }
    // }
    // xiaoming.sendFlowers(A);
    
    // function Flowers(){
    //   console.log('送花')
    // }
    // var xiaoming={
    //   sendFlowers:function(target){
    //     var flower = new Flowers();
    //     target.receiveFlower(flower)
    //   }
    // }
    // var B = {
    //   receiveFlower:function(flower){
    //     A.receiveFlower(flower)
    //   }
    // }
    // var A={
    //   receiveFlower:function(flower){
    //     console.log('收到花'+flower)
    //   }
    // }
    // xiaoming.sendFlowers(B)
    
    // function Flowers(){
    //   console.log('送花')
    // }
    // var xiaoming={
    //   sendFlowers:function(target){
    //     var flower = new Flowers();
    //     target.receiveFlower(flower)
    //   }
    // }
    // var B = {
    //   receiveFlower:function(flower){
    //     // 回调函数
    //     A.listenGoods(function(){
    //       A.receiveFlower(flower)
    //     })
    //   },
    // }
    // var A={
    //   receiveFlower:function(flower){
    //     console.log('收到花'+flower)
    //   },
    //   listenGoods:function(fn){
    //     setTimeout(function(){
    //       console.log('fn',fn)
    //       fn();
    //     },1000)
    //   }
    // }
    // xiaoming.sendFlowers(B)
    
    // 实例:虚拟代理实现图片预加载
     // var myImage = (function(){
     //    var imgNode = document.createElement('img'); 
     //    document.body.appendChild(imgNode);
     //    return {
     //      setSrc:function(src){
     //        imgNode.src=src
     //      }
     //    }
     // })()
     // // myImage.setSrc('file:///C:/Users/Administrator/Desktop/1.jpg');
     // var proxyImage = (function(){
     //  var img = new Image();
     //  img.onload =function(){
     //    myImage.setSrc(this.src)
     //  }
     //  return {
     //    setSrc:function(src){
     //      myImage.setSrc('file:///C:/Users/Administrator/Desktop/2.jpg');
     //      setTimeout(function(){
     //      img.src = src
     //      },1000)
     //    }
     //  }
     // })()
     // proxyImage.setSrc('file:///C:/Users/Administrator/Desktop/1.jpg')
     
     // 缓存代理的例子——计算乘积
     
     var mult = function(){
      console.log('开始计算乘积')
      var a = 1;
      for (var i = 0, l = arguments.length; i < l;  i++) {
        a = arguments[i] * a
      } 
      return a;
     }
     const res1 = mult( 2, 3 ); // 输出：6
     const res2 = mult( 2, 3, 4 ); // 输出：24 
     // console.log('res',res1, res2)

     var proxyMult = (function(){
      var cache = {}
      return function(){
        var args = [].join.call(arguments, ',')
        if(args in cache){
          return cache[args];
        }
        return cache[args] = mult.apply(this,arguments);
      }
     })()

   const res3 = proxyMult( 1, 2, 3, 4 ); // 输出：24
   console.log('res3',res3)

  </script>
</html>
